<nav class="site-nav">
  <div class="nav-container">
    <a href="/" class="site-logo">akisonlyforu</a>
    <button class="menu-toggle" aria-label="Toggle navigation menu" type="button">
      <span class="sr-only">Menu</span>
    </button>
    <div class="menu-items">
      <li class="about-anc">
        <a class="nav-underline home {% if page.url == '/' %}current{% endif %}" href="/">Home</a>
      </li>
      <li class="dropdown">
        <a class="nav-underline blog {% if page.url == '/blog/' %}current{% endif %}" href="{{site.url}}/blog">Blog</a>
        <div class="dropdown-content">
          <a href="{{site.url}}/blog/technical">Technical</a>
          <a href="{{site.url}}/blog/behavioural">Behavioural</a>
        </div>
      </li>
      <li class="about-anc">
        <a class="nav-underline about {% if page.url == '/about/' %}current{% endif %}" href="{{site.url}}/about">About</a>
      </li>
      <li class="search-anc">
        <a class="nav-underline search {% if page.url == '/search/' %}current{% endif %}" href="{{site.url}}/search">Search</a>
      </li>
      <li class="team-anc">
        <a class="nav-underline library {% if page.url == '/library/' %}current{% endif %}" href="{{site.url}}/library">Library</a>
      </li>
    </div>
  </div>
</nav>

<style>
.site-nav {
  background: #fff;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  display: flex;
  justify-content: center;
  width: 100%;
}

.nav-container {
  max-width: 800px;
  width: 100%;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 0;
}

.site-logo {
  font-size: 1.2rem;
  font-weight: 500;
  color: #333;
  text-decoration: none;
  font-family: monospace;
  letter-spacing: -0.5px;
}

.site-logo:hover {
  color: #000;
}

#main-menu {
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  align-items: center;
}

.menu-items {
  display: flex;
  gap: 2rem;
  align-items: center;
  margin: 0;
  padding: 0;
}

.menu-items li {
  list-style: none;
}

.menu-items a {
  text-decoration: none;
  color: #666;
  font-size: 0.95rem;
  font-weight: 400;
  transition: color 0.3s ease;
}

.menu-items a.current {
  color: #000;
  font-weight: 500;
}

.menu-items a:hover {
  color: #000;
}

.menu-toggle {
  display: none;
}

@media (max-width: 768px) {
  .menu-toggle {
    display: block;
    background: none;
    border: none;
    padding: 0.5rem;
    cursor: pointer;
  }

  .nav-container {
    flex-wrap: wrap;
  }

  #main-menu {
    display: none;
    width: 100%;
  }

  #main-menu.active {
    display: block;
  }

  .menu-items {
    flex-direction: column;
    gap: 1rem;
    padding: 1rem 0;
  }

  .dropdown-content {
    position: static;
    box-shadow: none;
    padding-left: 1rem;
  }
}
</style>

<script type="text/javascript">
(function() {
  // Immediately try to set up the menu
  function initMenu() {
    const menuToggle = document.querySelector('.menu-toggle');
    const mainMenu = document.getElementById('main-menu');
    
    if (!menuToggle || !mainMenu) {
      console.error('Required menu elements not found');
      return;
    }

    function toggleMenu(event) {
      event.preventDefault();
      event.stopPropagation();
      console.log('Toggle menu clicked');
      
      menuToggle.classList.toggle('active');
      mainMenu.classList.toggle('active');
      
      const isExpanded = menuToggle.classList.contains('active');
      menuToggle.setAttribute('aria-expanded', isExpanded);
      
      // Prevent body scrolling when menu is open
      document.body.style.overflow = isExpanded ? 'hidden' : '';
    }

    // Remove any existing listeners first
    menuToggle.removeEventListener('click', toggleMenu);
    // Add the click listener
    menuToggle.addEventListener('click', toggleMenu);

    // Handle link clicks
    const links = mainMenu.getElementsByTagName('a');
    Array.from(links).forEach(link => {
      link.addEventListener('click', () => {
        menuToggle.classList.remove('active');
        mainMenu.classList.remove('active');
        menuToggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      });
    });

    // Close on outside click
    document.addEventListener('click', (event) => {
      const isMenuOpen = mainMenu.classList.contains('active');
      const clickedOutside = !mainMenu.contains(event.target) && !menuToggle.contains(event.target);
      
      if (isMenuOpen && clickedOutside) {
        menuToggle.classList.remove('active');
        mainMenu.classList.remove('active');
        menuToggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      }
    });

    // Close on escape key
    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape' && mainMenu.classList.contains('active')) {
        menuToggle.classList.remove('active');
        mainMenu.classList.remove('active');
        menuToggle.setAttribute('aria-expanded', 'false');
        document.body.style.overflow = '';
      }
    });

    // Set initial state
    menuToggle.setAttribute('aria-expanded', 'false');
    console.log('Menu successfully initialized');
  }

  // Try to init immediately
  initMenu();

  // Also try on DOMContentLoaded
  document.addEventListener('DOMContentLoaded', initMenu);

  // Final fallback - try after a slight delay
  setTimeout(initMenu, 500);
})();
</script>
