// Dark Mode Theme System
// Uses CSS custom properties for seamless theme switching

// Root light theme (default)
:root {
  // Background colors
  --bg-primary: #ffffff;
  --bg-secondary: #f8f9fa;
  --bg-tertiary: #ffffff;

  // Text colors
  --text-primary: #333333;
  --text-secondary: #666666;
  --text-tertiary: #999999;
  --text-inverse: #ffffff;

  // Navigation
  --nav-bg: #ffffff;
  --nav-text: #666666;
  --nav-text-hover: #000000;
  --nav-text-current: #000000;
  --nav-border: rgba(0, 0, 0, 0.1);
  --nav-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

  // Interactive elements
  --tile-bg: #ffffff;
  --tile-border: rgba(0, 0, 0, 0.1);
  --tile-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  --tile-shadow-hover: 0 10px 20px rgba(0, 0, 0, 0.1);
  --tile-gradient: linear-gradient(45deg, #dcf3ff, #aedbf9);

  // Form elements
  --input-bg: #ffffff;
  --input-border: #dddddd;
  --input-border-focus: #666666;
  --input-text: #333333;

  // Footer
  --footer-bg: #ffffff;
  --footer-text: #666666;
  --footer-border: rgba(0, 0, 0, 0.1);

  // Buttons
  --button-bg: #333333;
  --button-bg-hover: #000000;
  --button-text: #ffffff;

  // Links
  --link-color: #0076df;
  --link-hover: #00369f;

  // Borders and dividers
  --border-color: rgba(0, 0, 0, 0.1);
  --divider-color: #eeeeee;

  // Blog-specific variables
  --bg-alt: #f8f9fa;
  --heading-color: #333333;
  --card-bg: #ffffff;
  --text-color: #333333;
  --text-muted: #666666;
  --primary-color: #0076df;
  --primary-dark: #00369f;
  --tag-bg: #e9ecef;
  --tag-color: #495057;
  --tag-hover-bg: #dee2e6;
  --primary-gradient: linear-gradient(135deg, #0076df, #00369f);
  --accent-color: #28a745;
  --accent-dark: #1e7e34;
}

// Dark theme
[data-theme="dark"],
body[data-theme="dark"] {
  // Background colors
  --bg-primary: #1a1a1a;
  --bg-secondary: #2a2a2a;
  --bg-tertiary: #252525;

  // Text colors
  --text-primary: #e0e0e0;
  --text-secondary: #b0b0b0;
  --text-tertiary: #888888;
  --text-inverse: #1a1a1a;

  // Navigation
  --nav-bg: #252525;
  --nav-text: #b0b0b0;
  --nav-text-hover: #ffffff;
  --nav-text-current: #ffffff;
  --nav-border: rgba(255, 255, 255, 0.1);
  --nav-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);

  // Interactive elements
  --tile-bg: #2a2a2a;
  --tile-border: rgba(255, 255, 255, 0.1);
  --tile-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  --tile-shadow-hover: 0 10px 20px rgba(0, 0, 0, 0.5);
  --tile-gradient: linear-gradient(45deg, #1e3a5f, #2c5282);

  // Form elements
  --input-bg: #2a2a2a;
  --input-border: #444444;
  --input-border-focus: #888888;
  --input-text: #e0e0e0;

  // Footer
  --footer-bg: #1a1a1a;
  --footer-text: #b0b0b0;
  --footer-border: rgba(255, 255, 255, 0.1);

  // Buttons
  --button-bg: #e0e0e0;
  --button-bg-hover: #ffffff;
  --button-text: #1a1a1a;

  // Links
  --link-color: #4dabf7;
  --link-hover: #74c0fc;

  // Borders and dividers
  --border-color: rgba(255, 255, 255, 0.1);
  --divider-color: #333333;

  // Blog-specific variables
  --bg-alt: #2a2a2a;
  --heading-color: #e0e0e0;
  --card-bg: #2a2a2a;
  --text-color: #e0e0e0;
  --text-muted: #b0b0b0;
  --primary-color: #4dabf7;
  --primary-dark: #74c0fc;
  --tag-bg: #343a40;
  --tag-color: #adb5bd;
  --tag-hover-bg: #495057;
  --primary-gradient: linear-gradient(135deg, #4dabf7, #74c0fc);
  --accent-color: #51cf66;
  --accent-dark: #69db7c;
}

// Note: System preference detection is handled by JavaScript
// Site defaults to light mode and only switches to dark when explicitly set

// Global theme application
html,
body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
  transition: background-color 0.3s ease, color 0.3s ease;
}

// Ensure all major containers inherit theme
.site,
.site-wrap,
.post,
main,
article {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

// Force theme application to specific components
.feature-tiles .tile {
  background: var(--tile-bg) !important;
  border: 1px solid var(--tile-border) !important;
  box-shadow: var(--tile-shadow) !important;

  h3 {
    color: var(--text-primary) !important;
  }

  p {
    color: var(--text-secondary) !important;
  }

  &:hover {
    box-shadow: var(--tile-shadow-hover) !important;
  }

  &::before {
    background: var(--tile-gradient) !important;
  }
}

// Global text element overrides
h1, h2, h3, h4, h5, h6 {
  color: var(--text-primary) !important;
}

p {
  color: var(--text-primary) !important;
}

// Links
a {
  color: var(--link-color) !important;

  &:hover {
    color: var(--link-hover) !important;
  }
}

// Dark mode toggle button styles
.dark-mode-toggle {
  background: none;
  border: none;
  cursor: pointer;
  padding: 0.5rem;
  margin: 0 0.5rem;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.3s ease;
  color: var(--nav-text);
  font-size: 1.2rem;
  position: relative;
  z-index: 1001;
}

.dark-mode-toggle:hover {
  background-color: var(--bg-secondary);
  color: var(--nav-text-hover);
  transform: scale(1.1);
}

.dark-mode-toggle:focus {
  outline: none;
}

.dark-mode-toggle .icon {
  transition: transform 0.3s ease;
  display: block;
}

.dark-mode-toggle.rotating .icon {
  transform: rotate(180deg);
}


// Theme transition for all elements
* {
  transition: background-color 0.3s ease,
              border-color 0.3s ease,
              color 0.3s ease,
              box-shadow 0.3s ease;
}

// Disable transitions during theme change for better performance
.theme-transitioning * {
  transition: none !important;
}

// Blog-specific styling overrides
.post {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

.post-title {
  color: var(--heading-color) !important;
}

.post-summary {
  color: var(--text-muted) !important;
}

.post-meta {
  color: var(--text-muted) !important;
}

.post-link {
  color: var(--link-color) !important;
}

.post-link:hover {
  color: var(--link-hover) !important;
}

// Ensure post cards have proper theming
.post-item,
.featured-card {
  background: var(--card-bg) !important;
  border: 1px solid var(--border-color) !important;
}

// Blog page specific overrides
.home {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

// Mobile navigation dark mode overrides
[data-theme="dark"] {
  @media (max-width: 768px) {
  .menu-items {
    background-color: var(--nav-bg) !important;
  }

  .nav-link {
    color: var(--nav-text) !important;
  }

  .nav-link:hover {
    color: var(--nav-text-hover) !important;
  }

  .nav-link.current {
    color: var(--nav-text-current) !important;
  }

  .nav-link.disabled {
    color: var(--text-tertiary) !important;
  }

  .nav-link.disabled:hover {
    color: var(--text-tertiary) !important;
  }

  .nav-link.disabled::after {
    color: var(--text-tertiary) !important;
  }

  // Fix mobile menu icon visibility in dark mode
  .menu-toggle .menu-icon,
  .menu-toggle .menu-icon::before,
  .menu-toggle .menu-icon::after {
    background: #ffffff !important;
  }

  .menu-toggle.active .menu-icon {
    background: transparent !important;
  }

  .menu-toggle.active .menu-icon::before,
  .menu-toggle.active .menu-icon::after {
    background: #ffffff !important;
  }
  }
}

